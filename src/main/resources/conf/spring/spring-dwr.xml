<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:dwr="http://www.directwebremoting.org/schema/spring-dwr"
       xmlns:crm="http://org.iusp.cn/custom/schema/crm"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.directwebremoting.org/schema/spring-dwr
       http://www.directwebremoting.org/schema/spring-dwr/spring-dwr-3.0.xsd
       http://org.iusp.cn/custom/schema/crm http://org.iusp.cn/custom/schema/crm.xsd">

    <!-- DWR配置 -->
    <bean
            class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping">
        <property name="order" value="1"/>
    </bean>


    <bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"/>

    <bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping">
        <property name="order" value="2"/>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/>

    <bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="order" value="3"/>
        <property value="true" name="alwaysUseFullPath"></property>
        <property name="mappings">
            <props>
                <prop key="/dwr/**/*">dwrController</prop>
                <prop key="/rm/**/*">crmController</prop>
            </props>
        </property>
    </bean>

    <dwr:configuration>
    </dwr:configuration>

    <dwr:controller id="dwrController" debug="true">
        <dwr:config-param name="crossDomainSessionSecurity"
                          value="false"/>
        <dwr:config-param name="allowScriptTagRemoting"
                          value="true"/>
        <dwr:config-param name="classes" value="java.lang.Object"/>
        <dwr:config-param name="activeReverseAjaxEnabled"
                          value="true"/>
        <dwr:config-param name="initApplicationScopeCreatorsAtStartup"
                          value="true"/>
        <dwr:config-param name="maxWaitAfterWrite" value="3000"/>
        <dwr:config-param name="logLevel" value="WARN"/>
    </dwr:controller>
    <dwr:annotation-config/>

    <crm:controller id="crmController" name="crmController">
        <crm:config-param name="allowScriptTagRemoting"
                          value="true"/>
    </crm:controller>

    <dwr:annotation-scan scanRemoteProxy="true"
                         scanDataTransferObject="true" base-package="org.iusp.dwr"/>

</beans>